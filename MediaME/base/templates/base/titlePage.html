{% extends 'main.html'%}
{% load static %}
{%block content%}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<h1>title page</h1>
<div class="title-container">
    
    <div class="side-container">
        <ul>
            {% for room in media.rooms.all %}
                <li>
                    <a href="{% url 'room-tab' pk=media.id tab=room.tab %}">
                        {{ room.tab|capfirst }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
    <div class="main-container">
        {% if media.poster %}
        <img src="{{media.poster.url}}" alt="{{media.title}}" class="center">
        {% endif %}
        <h2>{{media.title}}</h2>

        {% if user.is_authenticated %}
            <form method="post" action="{% url 'toggle-media-favorite' media.id %}">
                {% csrf_token %}
                <button type="submit" class="favorite-button">
                    {% if media.is_favorited user %}
                        ★ Unfavorite
                    {% else %}
                        ☆ Favorite
                    {% endif %}
                </button>
            </form>
        {% else %}
            <p><a href="{% url 'login' %}">Log in</a> to favorite this media.</p>
        {% endif %}

        <br>
        <p> {{media.description}}
        </p>
    </div>
</div>
<!--{% if messages %}
            <ul class="messages">
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
            </ul>
            {% endif %}-->
<div class="active-participants">
    <h3>Most Active Participants</h3>
    <ul>
        {% for participant in active_participants %}
            <li>{{ participant.username }} - Posts: {{ participant.post_count }}</li>
        {% empty %}
            <li>No active participants yet.</li>
        {% endfor %}
    </ul>
</div>
{%endblock%}
